(window.webpackJsonp=window.webpackJsonp||[]).push([[26,11,12,14,19],{494:function(t,e,n){var content=n(495);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(22).default)("52d9b218",content,!0,{sourceMap:!1})},495:function(t,e,n){var o=n(21)((function(i){return i[1]}));o.push([t.i,".v-dialog{border-radius:4px;box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12);margin:24px;outline:none;overflow-y:auto;pointer-events:auto;transition:.3s cubic-bezier(.25,.8,.25,1);width:100%;z-index:inherit}.v-dialog:not(.v-dialog--fullscreen){max-height:90%}.v-dialog>*{width:100%}.v-dialog>.v-card>.v-card__title{font-size:1.25rem;font-weight:500;letter-spacing:.0125em;padding:16px 24px 10px}.v-dialog>.v-card>.v-card__subtitle,.v-dialog>.v-card>.v-card__text{padding:0 24px 20px}.v-dialog>.v-card>.v-card__actions{padding:8px 16px}.v-dialog__content{align-items:center;display:flex;height:100%;justify-content:center;left:0;pointer-events:none;position:fixed;top:0;transition:.2s cubic-bezier(.25,.8,.25,1),z-index 1ms;width:100%;z-index:6}.v-dialog__container{display:none}.v-dialog__container--attached{display:inline}.v-dialog--animated{animation-duration:.15s;animation-name:animate-dialog;animation-timing-function:cubic-bezier(.25,.8,.25,1)}.v-dialog--fullscreen{border-radius:0;height:100%;left:0;margin:0;overflow-y:auto;position:fixed;top:0}.v-dialog--fullscreen>.v-card{margin:0!important;min-height:100%;min-width:100%;padding:0!important}.v-dialog--scrollable,.v-dialog--scrollable>form{display:flex}.v-dialog--scrollable>.v-card,.v-dialog--scrollable>form>.v-card{display:flex;flex:1 1 100%;flex-direction:column;max-height:100%;max-width:100%}.v-dialog--scrollable>.v-card>.v-card__actions,.v-dialog--scrollable>.v-card>.v-card__title,.v-dialog--scrollable>form>.v-card>.v-card__actions,.v-dialog--scrollable>form>.v-card>.v-card__title{flex:0 0 auto}.v-dialog--scrollable>.v-card>.v-card__text,.v-dialog--scrollable>form>.v-card>.v-card__text{backface-visibility:hidden;flex:1 1 auto;overflow-y:auto}@keyframes animate-dialog{0%{transform:scale(1)}50%{transform:scale(1.03)}to{transform:scale(1)}}",""]),o.locals={},t.exports=o},502:function(t,e,n){var content=n(527);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(22).default)("911ded44",content,!0,{sourceMap:!1})},503:function(t,e,n){var content=n(529);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(22).default)("23437d98",content,!0,{sourceMap:!1})},507:function(t,e,n){var content=n(508);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(22).default)("53887fd2",content,!0,{sourceMap:!1})},508:function(t,e,n){var o=n(21)((function(i){return i[1]}));o.push([t.i,".v-tooltip{display:none}.v-tooltip--attached{display:inline}.v-tooltip__content{background:rgba(97,97,97,.9);border-radius:4px;color:#fff;display:inline-block;font-size:14px;line-height:22px;opacity:0;padding:5px 16px;pointer-events:none;position:absolute;text-transform:none;width:auto}.v-tooltip__content.menuable__content__active{opacity:.9}.v-tooltip__content--fixed{position:fixed}.v-tooltip__content[class*=-active]{transition-timing-function:cubic-bezier(0,0,.2,1)}.v-tooltip__content[class*=enter-active]{transition-duration:.15s}.v-tooltip__content[class*=leave-active]{transition-duration:75ms}",""]),o.locals={},t.exports=o},513:function(t,e,n){"use strict";n.r(e);var o=n(238),c=n(517),r=n(490),l=n(569),d=n(489),f=n(632),h=n(630),v=n(213),m=n(558),x=n(486),_=n(533),y=n(531),C=n(631),k=n(30),F=(n(178),n(75),n(179),n(5),n(76),n(119),{props:{inside:{type:Boolean,default:!1},update:{type:Boolean,default:!1},cotizacionEditada:{type:Object,default:null}},data:function(){return{headers:[{text:"Producto"},{text:"Referencia"},{text:"Precio"},{text:"Descuento"},{text:"Impuesto"},{text:"Descripción"},{text:"Cantidad"},{text:"Total"},{text:"Acciones"}],contactos:[],productos:[],filas:[{item:null,referencia:"",precio:0,descuento:0,impuesto:0,descripcion:"",cantidad:1,total:0}],subtotal:0,impuestos:0,total:0,telefono:"",contactoSeleccionado:null,numeroNota:"",fecha:"",fechaVencimiento:"",menuFecha:!1,menuVencimiento:!1,notas:""}},watch:{cotizacionEditada:function(t){t&&this.cargarCotizacion(t)}},mounted:function(){var t=this;this.getContactos().then((function(){return t.getProductos()})).then((function(){t.update&&t.cotizacionEditada&&t.cargarCotizacion(t.cotizacionEditada)}))},methods:{getContactos:function(){var t=this;return Object(k.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/clientes");case 3:(n=e.sent).data&&n.data.success&&(t.contactos=n.data.clientes),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error al obtener los contactos:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},getProductos:function(){var t=this;return Object(k.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/inventarios");case 3:(n=e.sent).data&&n.data.success&&(t.productos=n.data.inventarios),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error al obtener los productos:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},cargarCotizacion:function(t){var e=this;this.contactoSeleccionado=null,this.telefono="",this.filas=[{item:null,referencia:"",precio:0,descuento:0,impuesto:0,descripcion:"",cantidad:1,total:0}];var n=this.contactos.find((function(e){return e.nombre.trim()===t.cliente.trim()}));n&&(this.contactoSeleccionado=n.id,this.telefono=n.telefono),this.numeroNota=t.numeronota||"",this.fecha=t.creacion||"",this.fechaVencimiento=t.vencimiento||"",this.notas=t.notas||"",this.filas=t.producto.map((function(t){var n=e.productos.find((function(p){return p.item.trim()===t.nombreproducto.trim()}));return n?{item:n.id,referencia:t.referencia||"",precio:t.precio||0,descuento:t.descuento||0,impuesto:t.impuesto||0,descripcion:t.descripcion||"",cantidad:t.cantidad||1,total:t.total||0}:{item:null,referencia:t.referencia||"",precio:t.precio||0,descuento:t.descuento||0,impuesto:t.impuesto||0,descripcion:t.descripcion||"",cantidad:t.cantidad||1,total:t.total||0}})),this.calcularTotales()},agregarFila:function(){this.filas.push({item:null,referencia:"",precio:0,descuento:0,impuesto:0,descripcion:"",cantidad:1,total:0})},eliminarFila:function(t){this.filas.splice(t,1),this.calcularTotales()},actualizarPrecio:function(t){var e=this.filas[t].item,n=this.productos.find((function(t){return t.id===e}));n&&(this.filas[t].precio=n.precio,this.filas[t].referencia=n.ref,this.filas[t].descripcion=n.descripcion,this.calcularTotal(t))},calcularTotal:function(t){var e=this.filas[t],n=e.precio*e.cantidad,o=e.descuento/100*n,c=e.impuesto/100*(n-o);e.total=n-o+c,this.calcularTotales()},calcularTotales:function(){this.subtotal=this.filas.reduce((function(t,e){return t+e.total}),0),this.impuestos=this.filas.reduce((function(t,e){return t+e.impuesto/100*(e.precio*e.cantidad)}),0),this.total=this.subtotal+this.impuestos},guardarCotizacion:function(){var t=this,e=this.filas.map((function(e){var n=t.productos.find((function(t){return t.id===e.item}));return{nombreproducto:(null==n?void 0:n.item)||"",referencia:e.referencia||"",precio:parseFloat(e.precio)||0,descuento:parseFloat(e.descuento)||0,impuesto:parseFloat(e.impuesto)||0,descripcion:e.descripcion||"",cantidad:parseInt(e.cantidad)||0,total:parseFloat(e.total)||0}}));if(e.every((function(p){return p.nombreproducto&&p.referencia&&p.precio>=0&&p.cantidad>0&&p.total>=0}))){var n=this.contactos.find((function(e){return e.id===t.contactoSeleccionado})),o={cliente:n.nombre,numero:n.telefono,numeronota:this.numeroNota,creacion:this.fecha,vencimiento:this.fechaVencimiento,producto:e,total:this.total,notas:this.notas};this.update?this.$axios.put("/cotizaciones/update/".concat(this.cotizacionEditada.id),o).then((function(e){e.data.success?(t.limpiarFormulario(),t.$emit("guardado")):console.error(e.data.message)})).catch((function(t){console.error("Error al actualizar la cotización",t)})):this.$axios.post("/cotizaciones/create",o).then((function(e){e.data.success?(t.limpiarFormulario(),t.$emit("guardado")):console.error(e.data.message)})).catch((function(t){console.error("Error al guardar la cotización",t)}))}else alert("Hay errores en los datos de los productos. Por favor, verifica.")},limpiarFormulario:function(){this.contactoSeleccionado=null,this.telefono="",this.numeroNota="",this.fecha="",this.fechaVencimiento="",this.filas=[{item:null,referencia:"",precio:0,descuento:0,impuesto:0,descripcion:"",cantidad:1,total:0}],this.subtotal=0,this.impuestos=0,this.total=0,this.notas=""},actualizarTelefono:function(){var t=this,e=this.contactos.find((function(e){return e.id===t.contactoSeleccionado}));this.telefono=e?e.telefono:""},cancelar:function(){this.limpiarFormulario(),this.$emit("click-cancel")}}}),w=n(67),component=Object(w.a)(F,(function(){var t=this,e=t._self._c;return e(d.a,{staticClass:"quote-container",attrs:{width:"1000"}},[e(c.a,{attrs:{flat:"",elevation:"0",color:"#FFFFFF"}},[e(r.c,[e("div",{staticClass:"d-flex justify-space-between align-center"},[e("h1",{staticClass:"title"},[t._v("\n          "+t._s(t.inside&&t.update?"Actualiza Cotización":t.inside?"Registra una Nueva Cotizacion":"")+"\n        ")])])]),t._v(" "),e(r.b,[e(h.a,{on:{submit:function(e){return e.preventDefault(),t.guardarCotizacion.apply(null,arguments)}}},[e(x.a,[e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"4"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Contacto\n            ")]),t._v(" "),e(_.a,{attrs:{items:t.contactos,"item-text":"nombre","item-value":"id",label:"Contacto",dense:"",outlined:"",required:""},on:{change:t.actualizarTelefono},model:{value:t.contactoSeleccionado,callback:function(e){t.contactoSeleccionado=e},expression:"contactoSeleccionado"}})],1),t._v(" "),e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"4"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Teléfono\n            ")]),t._v(" "),e(y.a,{attrs:{label:"Teléfono",outlined:"",dense:"",disabled:"",required:"",readonly:""},model:{value:t.telefono,callback:function(e){t.telefono=e},expression:"telefono"}})],1),t._v(" "),e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"4"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Número de Nota\n            ")]),t._v(" "),e(y.a,{attrs:{label:"Número de Nota",outlined:"",dense:"",required:""},model:{value:t.numeroNota,callback:function(e){t.numeroNota=e},expression:"numeroNota"}})],1)],1),t._v(" "),e(x.a,[e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"6"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Fecha\n            ")]),t._v(" "),e(m.a,{ref:"menu1",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,c=n.attrs;return[e(y.a,t._g(t._b({attrs:{label:"Fecha",readonly:"",dense:"",outlined:""},model:{value:t.fecha,callback:function(e){t.fecha=e},expression:"fecha"}},"v-text-field",c,!1),o))]}}]),model:{value:t.menuFecha,callback:function(e){t.menuFecha=e},expression:"menuFecha"}},[t._v(" "),e(f.a,{on:{input:function(e){t.menuFecha=!1}},model:{value:t.fecha,callback:function(e){t.fecha=e},expression:"fecha"}})],1)],1),t._v(" "),e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"6"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Vencimiento\n            ")]),t._v(" "),e(m.a,{ref:"menu2",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,c=n.attrs;return[e(y.a,t._g(t._b({attrs:{label:"Fecha de Vencimiento",readonly:"",dense:"",outlined:""},model:{value:t.fechaVencimiento,callback:function(e){t.fechaVencimiento=e},expression:"fechaVencimiento"}},"v-text-field",c,!1),o))]}}]),model:{value:t.menuVencimiento,callback:function(e){t.menuVencimiento=e},expression:"menuVencimiento"}},[t._v(" "),e(f.a,{on:{input:function(e){t.menuVencimiento=!1}},model:{value:t.fechaVencimiento,callback:function(e){t.fechaVencimiento=e},expression:"fechaVencimiento"}})],1)],1)],1),t._v(" "),e("div",{staticStyle:{"background-color":"white","border-radius":"8px",padding:"20px",margin:"20px","box-shadow":"0 4px 6px rgba(0, 0, 0, 0.2)"}},[e("div",{staticStyle:{display:"flex","background-color":"#3282B8",color:"white",padding:"10px","border-radius":"15px"}},t._l(t.headers,(function(header){return e("div",{key:header.text,staticStyle:{flex:"1","text-align":"center","font-weight":"bold"}},[t._v("\n              "+t._s(header.text)+"\n            ")])})),0),t._v(" "),t._l(t.filas,(function(n,c){return e("div",{key:c,staticStyle:{display:"flex",padding:"10px","border-bottom":"1px solid #ccc"}},[e("div",{staticStyle:{flex:"1","text-align":"center"}},[e(_.a,{attrs:{items:t.productos,"item-text":"item","item-value":"id",label:"Producto",dense:"",outlined:""},on:{change:function(e){return t.actualizarPrecio(c)}},model:{value:n.item,callback:function(e){t.$set(n,"item",e)},expression:"fila.item"}})],1),t._v(" "),e("div",{staticStyle:{flex:"1","text-align":"center"}},[t._v("\n              "+t._s(n.referencia)+"\n            ")]),t._v(" "),e("div",{staticStyle:{flex:"1","text-align":"center"}},[t._v("\n              "+t._s(n.precio)+"\n            ")]),t._v(" "),e("div",{staticStyle:{flex:"1","text-align":"center"}},[e(y.a,{attrs:{type:"number",dense:"",outlined:""},on:{input:function(e){return t.calcularTotal(c)}},model:{value:n.descuento,callback:function(e){t.$set(n,"descuento",e)},expression:"fila.descuento"}})],1),t._v(" "),e("div",{staticStyle:{flex:"1","text-align":"center"}},[e(y.a,{attrs:{type:"number",dense:"",outlined:""},on:{input:function(e){return t.calcularTotal(c)}},model:{value:n.impuesto,callback:function(e){t.$set(n,"impuesto",e)},expression:"fila.impuesto"}})],1),t._v(" "),e("div",{staticStyle:{flex:"1","text-align":"center"}},[t._v("\n              "+t._s(n.descripcion)+"\n            ")]),t._v(" "),e("div",{staticStyle:{flex:"1","text-align":"center"}},[e(y.a,{attrs:{type:"number",dense:"",outlined:""},on:{input:function(e){return t.calcularTotal(c)}},model:{value:n.cantidad,callback:function(e){t.$set(n,"cantidad",e)},expression:"fila.cantidad"}})],1),t._v(" "),e("div",{staticStyle:{flex:"1","text-align":"center"}},[t._v("\n              "+t._s(n.total)+"\n            ")]),t._v(" "),e("div",{staticStyle:{flex:"1","text-align":"center"}},[e(o.a,{attrs:{icon:"",color:"red"},on:{click:function(e){return t.eliminarFila(c)}}},[e(v.a,[t._v("mdi-delete")])],1)],1)])}))],2),t._v(" "),e(o.a,{staticClass:"my-3",attrs:{color:"blue",outlined:""},on:{click:t.agregarFila}},[t._v("\n          Agregar nueva fila\n        ")]),t._v(" "),e(x.a,[e(l.a,{attrs:{cols:"12",sm:"4","offset-sm":"8"}},[e(x.a,[e(l.a,[e("p",[e("strong",[t._v("Subtotal:")]),t._v(" "+t._s(t.subtotal))]),t._v(" "),e("p",[e("strong",[t._v("Impuestos:")]),t._v(" "+t._s(t.impuestos))]),t._v(" "),e("p",[e("strong",[t._v("Total:")]),t._v(" "+t._s(t.total))])])],1)],1)],1),t._v(" "),e(x.a,[e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Notas\n            ")]),t._v(" "),e(C.a,{attrs:{label:"Notas",dense:"",outlined:""},model:{value:t.notas,callback:function(e){t.notas=e},expression:"notas"}})],1)],1),t._v(" "),e(x.a,[e(l.a,{staticClass:"d-flex justify-space-between",attrs:{cols:"12"}},[e(o.a,{attrs:{outlined:"",color:"grey"},on:{click:t.cancelar}},[t._v("\n              Cancelar\n            ")]),t._v(" "),e(o.a,{attrs:{color:"blue"},on:{click:t.guardarCotizacion}},[t._v("\n              "+t._s(t.inside&&t.update?"Actualizar":t.inside?"Crear":"")+"\n            ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},514:function(t,e,n){"use strict";n.r(e);var o=n(238),c=n(517),r=n(490),l=n(569),d=n(489),f=n(632),h=n(630),v=n(213),m=n(558),x=n(486),_=n(533),y=n(531),C=n(631),k=n(30),F=(n(178),n(75),n(179),n(5),n(76),n(119),{props:{inside:{type:Boolean,default:!1},update:{type:Boolean,default:!1},facturaEditada:{type:Object,default:null}},data:function(){return{headers:[{text:"Producto"},{text:"Referencia"},{text:"Precio"},{text:"Descuento"},{text:"Impuesto"},{text:"Descripción"},{text:"Cantidad"},{text:"Total"},{text:"Acciones"}],contactos:[],productos:[],filas:[{item:null,referencia:"",precio:0,descuento:0,impuesto:0,descripcion:"",cantidad:1,total:0}],subtotal:0,impuestos:0,total:0,telefono:"",contactoSeleccionado:null,numeracionSeleccionada:"",fechaInicio:"",ultimaFecha:"",terminoFecha:"",fechaExpiracion:"",menuFecha:!1,menuVencimiento:!1,menuTerminoVisible:!1,menuExpiracionVisible:!1,observaciones:"",listaPrecioSeleccionada:"",frecuenciaSeleccionada:""}},watch:{facturaEditada:function(t){t&&this.cargarFactura(t)}},mounted:function(){var t=this;this.getContactos().then((function(){return t.getProductos()})).then((function(){t.update&&t.facturaEditada&&t.cargarFactura(t.facturaEditada)}))},methods:{getContactos:function(){var t=this;return Object(k.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/clientes");case 3:(n=e.sent).data&&n.data.success&&(t.contactos=n.data.clientes),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error al obtener los contactos:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},getProductos:function(){var t=this;return Object(k.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/inventarios");case 3:(n=e.sent).data&&n.data.success&&(t.productos=n.data.inventarios),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error al obtener los productos:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},cargarFactura:function(t){var e=this;this.contactoSeleccionado=null,this.telefono="",this.filas=[{item:null,referencia:"",precio:0,descuento:0,impuesto:0,descripcion:"",cantidad:1,total:0}];var n=this.contactos.find((function(e){return e.nombre.trim()===t.cliente.trim()}));n&&(this.contactoSeleccionado=n.id,this.telefono=n.telefono),this.numeracionSeleccionada=t.numeracion||"",this.fechaInicio=t.iniciofecha||"",this.ultimaFecha=t.ultimafecha||"",this.terminoFecha=t.termino||"",this.fechaExpiracion=t.expiracion||"",this.frecuenciaSeleccionada=t.frecuencia||"",this.listaPrecioSeleccionada=t.listprecio||"",this.notas=t.notafacturas||"",this.observaciones=t.observaciones||"",this.filas=t.producto.map((function(t){var n=e.productos.find((function(p){return p.item.trim()===t.nombreproducto.trim()}));return n?{item:n.id,referencia:t.referencia||"",precio:t.precio||0,descuento:t.descuento||0,impuesto:t.impuesto||0,descripcion:t.descripcion||"",cantidad:t.cantidad||1,total:t.total||0}:{item:null,referencia:t.referencia||"",precio:t.precio||0,descuento:t.descuento||0,impuesto:t.impuesto||0,descripcion:t.descripcion||"",cantidad:t.cantidad||1,total:t.total||0}})),this.calcularTotales()},agregarFila:function(){this.filas.push({item:null,referencia:"",precio:0,descuento:0,impuesto:0,descripcion:"",cantidad:1,total:0})},eliminarFila:function(t){this.filas.splice(t,1),this.calcularTotales()},actualizarPrecio:function(t){var e=this.filas[t].item,n=this.productos.find((function(t){return t.id===e}));n&&(this.filas[t].precio=n.precio,this.filas[t].referencia=n.ref,this.filas[t].descripcion=n.descripcion,this.calcularTotal(t))},calcularTotal:function(t){var e=this.filas[t],n=e.precio*e.cantidad,o=e.descuento/100*n,c=e.impuesto/100*(n-o);e.total=n-o+c,this.calcularTotales()},calcularTotales:function(){this.subtotal=this.filas.reduce((function(t,e){return t+e.total}),0),this.impuestos=this.filas.reduce((function(t,e){return t+e.impuesto/100*(e.precio*e.cantidad)}),0),this.total=this.subtotal+this.impuestos},guardarFactura:function(){var t=this,e=this.filas.map((function(e){var n=t.productos.find((function(t){return t.id===e.item}));return{nombreproducto:(null==n?void 0:n.item)||"",referencia:e.referencia||"",precio:parseFloat(e.precio)||0,descuento:parseFloat(e.descuento)||0,impuesto:parseFloat(e.impuesto)||0,descripcion:e.descripcion||"",cantidad:parseInt(e.cantidad)||0,total:parseFloat(e.total)||0}}));if(e.every((function(p){return p.nombreproducto&&p.referencia&&p.precio>=0&&p.cantidad>0&&p.total>=0}))){var n=this.contactos.find((function(e){return e.id===t.contactoSeleccionado})),o={numeracion:this.numeracionSeleccionada,cliente:n.nombre,telefono:n.telefono,observaciones:this.observaciones,iniciofecha:this.fechaInicio,ultimafecha:this.ultimaFecha,termino:this.terminoFecha,expiracion:this.fechaExpiracion,frecuencia:this.frecuenciaSeleccionada,listprecio:this.listaPrecioSeleccionada,notafacturas:this.notas,producto:e,total:this.total};this.update?this.$axios.put("/facturas/update/".concat(this.facturaEditada.id),o).then((function(e){e.data.success?(t.limpiarFormulario(),t.$emit("guardado")):console.error(e.data.message)})).catch((function(t){console.error("Error al actualizar la factura",t)})):this.$axios.post("/facturas/create",o).then((function(e){e.data.success?(t.limpiarFormulario(),t.$emit("guardado")):console.error(e.data.message)})).catch((function(t){console.error("Error al guardar la factura",t)}))}else alert("Hay errores en los datos de los productos. Por favor, verifica.")},limpiarFormulario:function(){this.contactoSeleccionado=null,this.numeracionSeleccionada="",this.observaciones="",this.fechaInicio="",this.ultimaFecha="",this.terminoFecha="",this.fechaExpiracion="",this.frecuenciaSeleccionada="",this.listaPrecioSeleccionada="",this.notas="",this.filas=[{item:null,referencia:"",precio:0,descuento:0,impuesto:0,descripcion:"",cantidad:1,total:0}],this.subtotal=0,this.impuestos=0,this.total=0},actualizarTelefono:function(){var t=this,e=this.contactos.find((function(e){return e.id===t.contactoSeleccionado}));this.telefono=e?e.telefono:""},cancelar:function(){this.$emit("click-cancel")}}}),w=(n(528),n(67)),component=Object(w.a)(F,(function(){var t=this,e=t._self._c;return e(d.a,{staticClass:"quote-container",attrs:{width:"1000"}},[e(c.a,{attrs:{flat:"",elevation:"0",color:"#FFFFFF"}},[e(r.c,[e("div",{staticClass:"d-flex justify-space-between align-center"},[e("h1",{staticClass:"title"},[t._v("\n          "+t._s(t.inside&&t.update?"Actualiza la Factura recurrente":t.inside?"Registra Nueva Factura Recurrente":"")+"\n        ")])])]),t._v(" "),e(r.b,[e(h.a,{on:{submit:function(e){return e.preventDefault(),t.guardarFactura.apply(null,arguments)}}},[e(x.a,[e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"4"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Numeración\n            ")]),t._v(" "),e(y.a,{attrs:{label:"Numeración",dense:"",outlined:"",required:""},model:{value:t.numeracionSeleccionada,callback:function(e){t.numeracionSeleccionada=e},expression:"numeracionSeleccionada"}})],1),t._v(" "),e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"4"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Contacto\n            ")]),t._v(" "),e(_.a,{attrs:{items:t.contactos,"item-text":"nombre","item-value":"id",label:"Contacto",dense:"",outlined:"",required:""},on:{change:t.actualizarTelefono},model:{value:t.contactoSeleccionado,callback:function(e){t.contactoSeleccionado=e},expression:"contactoSeleccionado"}})],1),t._v(" "),e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"4"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Teléfono\n            ")]),t._v(" "),e(y.a,{attrs:{label:"Teléfono",dense:"",outlined:"",disabled:"",required:"",readonly:""},model:{value:t.telefono,callback:function(e){t.telefono=e},expression:"telefono"}})],1)],1),t._v(" "),e(x.a,[e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"6"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Fecha de inicio\n            ")]),t._v(" "),e(m.a,{ref:"menu1",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,c=n.attrs;return[e(y.a,t._g(t._b({attrs:{label:"Fecha de inicio",readonly:"",dense:"",outlined:""},model:{value:t.fechaInicio,callback:function(e){t.fechaInicio=e},expression:"fechaInicio"}},"v-text-field",c,!1),o))]}}]),model:{value:t.menuFecha,callback:function(e){t.menuFecha=e},expression:"menuFecha"}},[t._v(" "),e(f.a,{on:{input:function(e){t.menuFecha=!1}},model:{value:t.fechaInicio,callback:function(e){t.fechaInicio=e},expression:"fechaInicio"}})],1)],1),t._v(" "),e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"6"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Última fecha\n            ")]),t._v(" "),e(m.a,{ref:"menu2",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,c=n.attrs;return[e(y.a,t._g(t._b({attrs:{label:"Última fecha",readonly:"",dense:"",outlined:""},model:{value:t.ultimaFecha,callback:function(e){t.ultimaFecha=e},expression:"ultimaFecha"}},"v-text-field",c,!1),o))]}}]),model:{value:t.menuVencimiento,callback:function(e){t.menuVencimiento=e},expression:"menuVencimiento"}},[t._v(" "),e(f.a,{on:{input:function(e){t.menuVencimiento=!1}},model:{value:t.ultimaFecha,callback:function(e){t.ultimaFecha=e},expression:"ultimaFecha"}})],1)],1)],1),t._v(" "),e(x.a,[e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"3"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Término\n            ")]),t._v(" "),e(m.a,{ref:"menuTermino",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,c=n.attrs;return[e(y.a,t._g(t._b({attrs:{label:"Término",readonly:"",dense:"",outlined:""},model:{value:t.terminoFecha,callback:function(e){t.terminoFecha=e},expression:"terminoFecha"}},"v-text-field",c,!1),o))]}}]),model:{value:t.menuTerminoVisible,callback:function(e){t.menuTerminoVisible=e},expression:"menuTerminoVisible"}},[t._v(" "),e(f.a,{on:{input:function(e){t.menuTerminoVisible=!1}},model:{value:t.terminoFecha,callback:function(e){t.terminoFecha=e},expression:"terminoFecha"}})],1)],1),t._v(" "),e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"3"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Fecha de expiración\n            ")]),t._v(" "),e(m.a,{ref:"menuExpiracion",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,c=n.attrs;return[e(y.a,t._g(t._b({attrs:{label:"Fecha de expiración",readonly:"",dense:"",outlined:""},model:{value:t.fechaExpiracion,callback:function(e){t.fechaExpiracion=e},expression:"fechaExpiracion"}},"v-text-field",c,!1),o))]}}]),model:{value:t.menuExpiracionVisible,callback:function(e){t.menuExpiracionVisible=e},expression:"menuExpiracionVisible"}},[t._v(" "),e(f.a,{on:{input:function(e){t.menuExpiracionVisible=!1}},model:{value:t.fechaExpiracion,callback:function(e){t.fechaExpiracion=e},expression:"fechaExpiracion"}})],1)],1),t._v(" "),e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"3"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Frecuencia\n            ")]),t._v(" "),e(_.a,{attrs:{items:["1","2","3","4","5","6","7","8","9","10"],"item-text":"nombre","item-value":"id",label:"Frecuencia",dense:"",outlined:""},model:{value:t.frecuenciaSeleccionada,callback:function(e){t.frecuenciaSeleccionada=e},expression:"frecuenciaSeleccionada"}})],1),t._v(" "),e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"3"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Lista de precio\n            ")]),t._v(" "),e(_.a,{attrs:{items:["General","Mayoritario"],"item-text":"nombre","item-value":"id",label:"Lista de precio",dense:"",outlined:""},model:{value:t.listaPrecioSeleccionada,callback:function(e){t.listaPrecioSeleccionada=e},expression:"listaPrecioSeleccionada"}})],1)],1),t._v(" "),e(x.a,[e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"4"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Notas de Factura\n            ")]),t._v(" "),e(C.a,{attrs:{label:"Notas de Factura",dense:"",outlined:""},model:{value:t.notas,callback:function(e){t.notas=e},expression:"notas"}})],1),t._v(" "),e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"4"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Observaciones\n            ")]),t._v(" "),e(C.a,{attrs:{label:"Observaciones",dense:"",outlined:""},model:{value:t.observaciones,callback:function(e){t.observaciones=e},expression:"observaciones"}})],1)],1),t._v(" "),e("div",{staticStyle:{"background-color":"white","border-radius":"8px",padding:"20px",margin:"20px","box-shadow":"0 4px 6px rgba(0, 0, 0, 0.2)"}},[e("div",{staticStyle:{display:"flex","background-color":"#3282B8",color:"white",padding:"10px","border-radius":"15px"}},t._l(t.headers,(function(header){return e("div",{key:header.text,staticStyle:{flex:"1","text-align":"center","font-weight":"bold"}},[t._v("\n              "+t._s(header.text)+"\n            ")])})),0),t._v(" "),t._l(t.filas,(function(n,c){return e("div",{key:c,staticStyle:{display:"flex",padding:"10px","border-bottom":"1px solid #ccc"}},[e("div",{staticStyle:{flex:"1","text-align":"center"}},[e(_.a,{attrs:{items:t.productos,"item-text":"item","item-value":"id",label:"Producto",dense:"",outlined:""},on:{change:function(e){return t.actualizarPrecio(c)}},model:{value:n.item,callback:function(e){t.$set(n,"item",e)},expression:"fila.item"}})],1),t._v(" "),e("div",{staticStyle:{flex:"1","text-align":"center"}},[t._v("\n              "+t._s(n.referencia)+"\n            ")]),t._v(" "),e("div",{staticStyle:{flex:"1","text-align":"center"}},[t._v("\n              "+t._s(n.precio)+"\n            ")]),t._v(" "),e("div",{staticStyle:{flex:"1","text-align":"center"}},[e(y.a,{attrs:{type:"number",dense:"",outlined:""},on:{input:function(e){return t.calcularTotal(c)}},model:{value:n.descuento,callback:function(e){t.$set(n,"descuento",e)},expression:"fila.descuento"}})],1),t._v(" "),e("div",{staticStyle:{flex:"1","text-align":"center"}},[e(y.a,{attrs:{type:"number",dense:"",outlined:""},on:{input:function(e){return t.calcularTotal(c)}},model:{value:n.impuesto,callback:function(e){t.$set(n,"impuesto",e)},expression:"fila.impuesto"}})],1),t._v(" "),e("div",{staticStyle:{flex:"1","text-align":"center"}},[t._v("\n              "+t._s(n.descripcion)+"\n            ")]),t._v(" "),e("div",{staticStyle:{flex:"1","text-align":"center"}},[e(y.a,{attrs:{type:"number",dense:"",outlined:""},on:{input:function(e){return t.calcularTotal(c)}},model:{value:n.cantidad,callback:function(e){t.$set(n,"cantidad",e)},expression:"fila.cantidad"}})],1),t._v(" "),e("div",{staticStyle:{flex:"1","text-align":"center"}},[t._v("\n              "+t._s(n.total)+"\n            ")]),t._v(" "),e("div",{staticStyle:{flex:"1","text-align":"center"}},[e(o.a,{attrs:{icon:"",color:"red"},on:{click:function(e){return t.eliminarFila(c)}}},[e(v.a,[t._v("mdi-delete")])],1)],1)])}))],2),t._v(" "),e(o.a,{staticClass:"my-3",attrs:{color:"blue",outlined:""},on:{click:t.agregarFila}},[t._v("\n          Agregar nueva fila\n        ")]),t._v(" "),e(x.a,[e(l.a,{attrs:{cols:"12",sm:"4","offset-sm":"8"}},[e(x.a,[e(l.a,[e("p",[e("strong",[t._v("Subtotal:")]),t._v(" "+t._s(t.subtotal))]),t._v(" "),e("p",[e("strong",[t._v("Impuestos:")]),t._v(" "+t._s(t.impuestos))]),t._v(" "),e("p",[e("strong",[t._v("Total:")]),t._v(" "+t._s(t.total))])])],1)],1)],1),t._v(" "),e(x.a,[e(l.a,{staticClass:"d-flex justify-space-between",attrs:{cols:"12"}},[e(o.a,{attrs:{outlined:"",color:"grey"},on:{click:t.cancelar}},[t._v("\n              Cancelar\n            ")]),t._v(" "),e(o.a,{attrs:{color:"blue"},on:{click:t.guardarFactura}},[t._v("\n              "+t._s(t.inside&&t.update?"Actualizar":t.inside?"Guardar":"")+"\n            ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,"75232694",null);e.default=component.exports},520:function(t,e,n){"use strict";var o=n(147),c=n(2),r=(n(10),n(11),n(178),n(59),n(28),n(16),n(17),n(8),n(5),n(68),n(76),n(9),n(69),n(494),n(628)),l=n(492),d=n(221),f=n(506),h=n(226),v=n(504),m=n(505),x=n(222),_=n(13),y=n(12),C=n(0);function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){Object(c.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var w=Object(_.a)(d.a,f.a,h.a,v.a,m.a,l.a);e.a=w.extend({name:"v-dialog",directives:{ClickOutside:x.a},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:[String,Number],noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:[String,Number]},data:function(){return{activatedBy:null,animate:!1,animateTimeout:-1,stackMinZIndex:200,previousActiveElement:null}},computed:{classes:function(){return Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)({},"v-dialog ".concat(this.contentClass).trim(),!0),"v-dialog--active",this.isActive),"v-dialog--persistent",this.persistent),"v-dialog--fullscreen",this.fullscreen),"v-dialog--scrollable",this.scrollable),"v-dialog--animated",this.animate)},contentClasses:function(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator:function(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive:function(t){var e;t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null===(e=this.previousActiveElement)||void 0===e||e.focus())},fullscreen:function(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created:function(){this.$attrs.hasOwnProperty("full-width")&&Object(y.e)("full-width",this)},beforeMount:function(){var t=this;this.$nextTick((function(){t.isBooted=t.isActive,t.isActive&&t.show()}))},beforeDestroy:function(){"undefined"!=typeof window&&this.unbind()},methods:{animateClick:function(){var t=this;this.animate=!1,this.$nextTick((function(){t.animate=!0,window.clearTimeout(t.animateTimeout),t.animateTimeout=window.setTimeout((function(){return t.animate=!1}),150)}))},closeConditional:function(t){var e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e)||this.overlay&&e&&!this.overlay.$el.contains(e))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll:function(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):h.a.options.methods.hideScroll.call(this)},show:function(){var t=this;!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick((function(){t.$nextTick((function(){var e,n;(null===(e=t.$refs.dialog)||void 0===e?void 0:e.contains(document.activeElement))||(t.previousActiveElement=document.activeElement,null===(n=t.$refs.dialog)||void 0===n||n.focus()),t.bind()}))}))},bind:function(){window.addEventListener("focusin",this.onFocusin)},unbind:function(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside:function(t){this.$emit("click:outside",t),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown:function(t){if(t.keyCode===C.s.esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;var e=this.getActivator();this.$nextTick((function(){return e&&e.focus()}))}this.$emit("keydown",t)},onFocusin:function(t){if(t&&this.retainFocus){var e=t.target;if(e&&this.$refs.dialog&&![document,this.$refs.dialog].includes(e)&&!this.$refs.dialog.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some((function(t){return t.contains(e)}))){var n=this.$refs.dialog.querySelectorAll('button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])'),c=Object(o.a)(n).find((function(t){return!t.hasAttribute("disabled")&&!t.matches('[tabindex="-1"]')}));c&&c.focus()}}},genContent:function(){var t=this;return this.showLazyContent((function(){return[t.$createElement(r.a,{props:{root:!0,light:t.light,dark:t.dark}},[t.$createElement("div",{class:t.contentClasses,attrs:F({role:"dialog","aria-modal":t.hideOverlay?void 0:"true"},t.getScopeIdAttrs()),on:{keydown:t.onKeydown},style:{zIndex:t.activeZIndex},ref:"content"},[t.genTransition()])])]}))},genTransition:function(){var content=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[content]):content},genInnerContent:function(){var data={class:this.classes,attrs:{tabindex:this.isActive?0:void 0},ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(data.style=F(F({},data.style),{},{maxWidth:Object(C.g)(this.maxWidth),width:Object(C.g)(this.width)})),this.$createElement("div",data,this.getContentSlot())}},render:function(t){return t("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},[this.genActivator(),this.genContent()])}})},526:function(t,e,n){"use strict";n(502)},527:function(t,e,n){var o=n(21)((function(i){return i[1]}));o.push([t.i,".table-container[data-v-755b9fe1]{background-color:#fff;border-radius:8px;box-shadow:0 4px 6px rgba(0,0,0,.2);margin:20px;padding:20px}.table-header[data-v-755b9fe1]{background-color:#3282b8;border-radius:15px;color:#fff;font-weight:700;padding:10px}.table-header[data-v-755b9fe1],.table-row[data-v-755b9fe1]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr 2fr 1fr 1fr auto;grid-gap:10px;gap:10px}.table-row[data-v-755b9fe1]{border-bottom:1px solid #ddd;padding:10px 0}.table-row .delete-button[data-v-755b9fe1]{background-color:#e63946;border:none;border-radius:5px;color:#fff;cursor:pointer;padding:5px 10px;transition:background-color .3s ease}.table-row .delete-button[data-v-755b9fe1]:hover{background-color:#d62828}.table-row[data-v-755b9fe1]:nth-child(2n){background-color:#f9f9f9}.table-row[data-v-755b9fe1]:nth-child(odd){background-color:#fff}.table-row input[data-v-755b9fe1]{border:1px solid #ccc;border-radius:5px;padding:5px;width:100%}.add-row-button[data-v-755b9fe1]{background-color:#3282b8;border:none;border-radius:5px;color:#fff;cursor:pointer;margin-top:10px;padding:10px 15px;transition:background-color .3s ease}.add-row-button[data-v-755b9fe1]:hover{background-color:#205375}",""]),o.locals={},t.exports=o},528:function(t,e,n){"use strict";n(503)},529:function(t,e,n){var o=n(21)((function(i){return i[1]}));o.push([t.i,".quote-container[data-v-75232694]{margin:0 auto}",""]),o.locals={},t.exports=o},534:function(t,e,n){"use strict";n.r(e);var o=n(238),c=n(517),r=n(490),l=n(569),d=n(489),f=n(632),h=n(541),v=n(630),m=n(213),x=n(558),_=n(486),y=n(533),C=n(531),k=n(631),F=n(30),w=(n(178),n(75),n(179),n(5),n(76),n(119),{props:{inside:{type:Boolean,default:!1},update:{type:Boolean,default:!1},ventaEditada:{type:Object,default:null}},data:function(){return{headers:[{text:"Producto"},{text:"Referencia"},{text:"Precio"},{text:"Descuento"},{text:"Impuesto"},{text:"Descripción"},{text:"Cantidad"},{text:"Total"},{text:"Acciones"}],contactos:[],productos:[],filas:[{item:null,referencia:"",precio:0,descuento:0,impuesto:0,descripcion:"",cantidad:1,total:0}],subtotal:0,impuestos:0,total:0,telefono:"",contactoSeleccionado:null,numeroNota:"",inicioFecha:"",terminoFecha:"",fechaVencimiento:"",menuInicioFecha:!1,menuTerminoVisible:!1,menuVencimiento:!1,notas:""}},watch:{ventaEditada:function(t){t&&this.cargarVenta(t)}},mounted:function(){var t=this;this.getContactos().then((function(){return t.getProductos()})).then((function(){t.update&&t.ventaEditada&&t.cargarVenta(t.ventaEditada)}))},methods:{getContactos:function(){var t=this;return Object(F.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/clientes");case 3:(n=e.sent).data&&n.data.success&&(t.contactos=n.data.clientes),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error al obtener los contactos:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},getProductos:function(){var t=this;return Object(F.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/inventarios");case 3:(n=e.sent).data&&n.data.success&&(t.productos=n.data.inventarios),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error al obtener los productos:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},cargarVenta:function(t){var e=this;this.contactoSeleccionado=null,this.telefono="",this.filas=[{item:null,referencia:"",precio:0,descuento:0,impuesto:0,descripcion:"",cantidad:1,total:0}];var n=this.contactos.find((function(e){return e.nombre.trim()===t.cliente.trim()}));n&&(this.contactoSeleccionado=n.id,this.telefono=n.telefono),this.numeroNota=t.nonota||"",this.tipoPago=t.tipopago||"",this.terminoFecha=t.fechatermino||"",this.fechaVencimiento=t.fechavencimiento||"",this.terminos=t.terminos||"",this.notas=t.notas||"",this.textoResolucion=t.resolucion||"",this.filas=t.producto.map((function(t){var n=e.productos.find((function(p){return p.item.trim()===t.nombreproducto.trim()}));return n?{item:n.id,referencia:t.referencia||"",precio:t.precio||0,descuento:t.descuento||0,impuesto:t.impuesto||0,descripcion:t.descripcion||"",cantidad:t.cantidad||1,total:t.total||0}:{item:null,referencia:t.referencia||"",precio:t.precio||0,descuento:t.descuento||0,impuesto:t.impuesto||0,descripcion:t.descripcion||"",cantidad:t.cantidad||1,total:t.total||0}})),this.calcularTotales()},agregarFila:function(){this.filas.push({item:null,referencia:"",precio:0,descuento:0,impuesto:0,descripcion:"",cantidad:1,total:0})},eliminarFila:function(t){this.filas.splice(t,1),this.calcularTotales()},actualizarPrecio:function(t){var e=this.filas[t].item,n=this.productos.find((function(t){return t.id===e}));n&&(this.filas[t].precio=n.precio,this.filas[t].referencia=n.ref,this.filas[t].descripcion=n.descripcion,this.calcularTotal(t))},calcularTotal:function(t){var e=this.filas[t],n=e.precio*e.cantidad,o=e.descuento/100*n,c=e.impuesto/100*(n-o);e.total=n-o+c,this.calcularTotales()},calcularTotales:function(){this.subtotal=this.filas.reduce((function(t,e){return t+e.total}),0),this.impuestos=this.filas.reduce((function(t,e){return t+e.impuesto/100*(e.precio*e.cantidad)}),0),this.total=this.subtotal+this.impuestos},guardarVenta:function(){var t=this,e=this.filas.map((function(e){var n=t.productos.find((function(t){return t.id===e.item}));return{nombreproducto:(null==n?void 0:n.item)||"",referencia:e.referencia||"",precio:parseFloat(e.precio)||0,descuento:parseFloat(e.descuento)||0,impuesto:parseFloat(e.impuesto)||0,descripcion:e.descripcion||"",cantidad:parseInt(e.cantidad)||0,total:parseFloat(e.total)||0}}));if(e.every((function(p){return p.nombreproducto&&p.referencia&&p.precio>=0&&p.cantidad>0&&p.total>=0}))){var n=this.contactos.find((function(e){return e.id===t.contactoSeleccionado})),o={nonota:this.numeroNota,cliente:n.nombre,telefono:n.telefono,tipopago:this.tipoPago,fechatermino:this.terminoFecha,fechavencimiento:this.fechaVencimiento,producto:e,terminos:this.terminos,notas:this.notas,resolucion:this.textoResolucion,total:this.total};this.update?this.$axios.put("/ventas/update/".concat(this.ventaEditada.id),o).then((function(e){e.data.success?(t.limpiarFormulario(),t.$emit("guardado")):console.error(e.data.message)})).catch((function(t){console.error("Error al actualizar la factura",t)})):this.$axios.post("/ventas/create",o).then((function(e){e.data.success?(t.limpiarFormulario(),t.$emit("guardado")):console.error(e.data.message)})).catch((function(t){console.error("Error al guardar la factura",t)}))}else alert("Hay errores en los datos de los productos. Por favor, verifica.")},limpiarFormulario:function(){this.contactoSeleccionado=null,this.numeroNota="",this.tipoPago="",this.terminoFecha="",this.fechaVencimiento="",this.terminos="",this.filas=[{item:null,referencia:"",precio:0,descuento:0,impuesto:0,descripcion:"",cantidad:1,total:0}],this.subtotal=0,this.impuestos=0,this.total=0,this.textoResolucion="",this.notas=""},actualizarTelefono:function(){var t=this,e=this.contactos.find((function(e){return e.id===t.contactoSeleccionado}));this.telefono=e?e.telefono:""},cancelar:function(){this.$emit("click-cancel")}}}),S=(n(526),n(67)),component=Object(S.a)(w,(function(){var t=this,e=t._self._c;return e(d.a,{staticClass:"quote-container",attrs:{width:"1000"}},[e(c.a,{attrs:{flat:"",elevation:"0",color:"#FFFFFF"}},[e(r.c,[e("div",{staticClass:"d-flex justify-space-between align-center"},[e("h1",{staticClass:"title"},[t._v("\n          "+t._s(t.inside&&t.update?"Actualiza la Factura":t.inside?"Registra Nueva Factura":"")+"\n        ")])])]),t._v(" "),e(r.b,[e(v.a,{on:{submit:function(e){return e.preventDefault(),t.guardarVenta.apply(null,arguments)}}},[e(_.a,[e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"4"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              No. Nota\n            ")]),t._v(" "),e(C.a,{staticClass:"text-right",attrs:{label:"No. Nota",dense:"",outlined:""},model:{value:t.numeroNota,callback:function(e){t.numeroNota=e},expression:"numeroNota"}})],1)],1),t._v(" "),e(_.a,[e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"4"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Contacto\n            ")]),t._v(" "),e(y.a,{attrs:{items:t.contactos,"item-text":"nombre","item-value":"id",label:"Contacto",dense:"",outlined:"",required:""},on:{change:t.actualizarTelefono},model:{value:t.contactoSeleccionado,callback:function(e){t.contactoSeleccionado=e},expression:"contactoSeleccionado"}})],1),t._v(" "),e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"4"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Teléfono\n            ")]),t._v(" "),e(C.a,{attrs:{label:"Teléfono",dense:"",outlined:"",disabled:"",required:"",readonly:""},model:{value:t.telefono,callback:function(e){t.telefono=e},expression:"telefono"}})],1),t._v(" "),e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"4"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Tipo de pago\n            ")]),t._v(" "),e(y.a,{attrs:{items:["Contado","Crédito"],label:"Tipo de pago",dense:"",outlined:"",required:""},model:{value:t.tipoPago,callback:function(e){t.tipoPago=e},expression:"tipoPago"}})],1)],1),t._v(" "),e(_.a,[e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"6"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Fecha de Inicio\n            ")]),t._v(" "),e(x.a,{ref:"menuTermino",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,c=n.attrs;return[e(C.a,t._g(t._b({attrs:{label:"Término",readonly:"",dense:"",outlined:""},model:{value:t.terminoFecha,callback:function(e){t.terminoFecha=e},expression:"terminoFecha"}},"v-text-field",c,!1),o))]}}]),model:{value:t.menuTerminoVisible,callback:function(e){t.menuTerminoVisible=e},expression:"menuTerminoVisible"}},[t._v(" "),e(f.a,{on:{input:function(e){t.menuTerminoVisible=!1}},model:{value:t.terminoFecha,callback:function(e){t.terminoFecha=e},expression:"terminoFecha"}})],1)],1),t._v(" "),e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"6"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Fecha de Vencimiento\n            ")]),t._v(" "),e(x.a,{ref:"menuVencimiento",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,c=n.attrs;return[e(C.a,t._g(t._b({attrs:{label:"Fecha de Vencimiento",readonly:"",dense:"",outlined:""},model:{value:t.fechaVencimiento,callback:function(e){t.fechaVencimiento=e},expression:"fechaVencimiento"}},"v-text-field",c,!1),o))]}}]),model:{value:t.menuVencimiento,callback:function(e){t.menuVencimiento=e},expression:"menuVencimiento"}},[t._v(" "),e(f.a,{on:{input:function(e){t.menuVencimiento=!1}},model:{value:t.fechaVencimiento,callback:function(e){t.fechaVencimiento=e},expression:"fechaVencimiento"}})],1)],1)],1),t._v(" "),e(h.a),t._v(" "),e("div",{staticClass:"mt-3"},[e("div",{staticClass:"table-header"},t._l(t.headers,(function(header){return e("div",{key:header.text,staticClass:"table-cell"},[t._v("\n              "+t._s(header.text)+"\n            ")])})),0),t._v(" "),t._l(t.filas,(function(n,c){return e("div",{key:c,staticClass:"table-row"},[e(y.a,{staticClass:"table-cell",attrs:{items:t.productos,"item-text":"item","item-value":"id",label:"Producto",dense:"",outlined:""},on:{change:function(e){return t.actualizarPrecio(c)}},model:{value:n.item,callback:function(e){t.$set(n,"item",e)},expression:"fila.item"}}),t._v(" "),e("div",{staticClass:"table-cell"},[t._v("\n              "+t._s(n.referencia)+"\n            ")]),t._v(" "),e("div",{staticClass:"table-cell"},[t._v("\n              "+t._s(n.precio)+"\n            ")]),t._v(" "),e(C.a,{staticClass:"table-cell",attrs:{type:"number",dense:"",outlined:""},on:{input:function(e){return t.calcularTotal(c)}},model:{value:n.descuento,callback:function(e){t.$set(n,"descuento",e)},expression:"fila.descuento"}}),t._v(" "),e(C.a,{staticClass:"table-cell",attrs:{type:"number",dense:"",outlined:""},on:{input:function(e){return t.calcularTotal(c)}},model:{value:n.impuesto,callback:function(e){t.$set(n,"impuesto",e)},expression:"fila.impuesto"}}),t._v(" "),e("div",{staticClass:"table-cell"},[t._v("\n              "+t._s(n.descripcion)+"\n            ")]),t._v(" "),e(C.a,{staticClass:"table-cell",attrs:{type:"number",dense:"",outlined:""},on:{input:function(e){return t.calcularTotal(c)}},model:{value:n.cantidad,callback:function(e){t.$set(n,"cantidad",e)},expression:"fila.cantidad"}}),t._v(" "),e("div",{staticClass:"table-cell"},[t._v("\n              "+t._s(n.total)+"\n            ")]),t._v(" "),e(o.a,{staticClass:"table-cell",attrs:{icon:"",color:"red"},on:{click:function(e){return t.eliminarFila(c)}}},[e(m.a,[t._v("mdi-delete")])],1)],1)})),t._v(" "),e(o.a,{staticClass:"my-3",attrs:{color:"blue",outlined:""},on:{click:t.agregarFila}},[t._v("\n            Agregar nueva fila\n          ")])],2),t._v(" "),e("div",{staticClass:"totales-container"},[e(_.a,[e(l.a,{attrs:{cols:"12",sm:"4","offset-sm":"8"}},[e(_.a,[e(l.a,[e("p",[e("strong",[t._v("Subtotal:")]),t._v(" "+t._s(t.subtotal))]),t._v(" "),e("p",[e("strong",[t._v("Impuestos:")]),t._v(" "+t._s(t.impuestos))]),t._v(" "),e("p",[e("strong",[t._v("Total:")]),t._v(" "+t._s(t.total))])])],1)],1)],1)],1),t._v(" "),e(h.a),t._v(" "),e(_.a,[e(l.a,{attrs:{cols:"12",sm:"4"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Términos y condiciones\n            ")]),t._v(" "),e(k.a,{attrs:{label:"Términos y condiciones",dense:"",outlined:""},model:{value:t.terminos,callback:function(e){t.terminos=e},expression:"terminos"}})],1),t._v(" "),e(l.a,{attrs:{cols:"12",sm:"4"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Notas\n            ")]),t._v(" "),e(k.a,{attrs:{label:"Notas",dense:"",outlined:""},model:{value:t.notas,callback:function(e){t.notas=e},expression:"notas"}})],1),t._v(" "),e(l.a,{attrs:{cols:"12",sm:"4"}},[e("h4",{staticClass:"mr-2"},[t._v("\n              Texto de Resolución\n            ")]),t._v(" "),e(k.a,{attrs:{label:"Texto de Resolución",dense:"",outlined:""},model:{value:t.textoResolucion,callback:function(e){t.textoResolucion=e},expression:"textoResolucion"}})],1)],1),t._v(" "),e(h.a),t._v(" "),e(_.a,[e(l.a,{staticClass:"d-flex justify-space-between",attrs:{cols:"12"}},[e(o.a,{attrs:{outlined:"",color:"grey"},on:{click:t.cancelar}},[t._v("\n              Cancelar\n            ")]),t._v(" "),e(o.a,{attrs:{outlined:"",color:"grey"}},[t._v("\n              Previsualizar\n            ")]),t._v(" "),e(o.a,{attrs:{color:"blue"},on:{click:t.guardarVenta}},[t._v("\n              "+t._s(t.inside&&t.update?"Actualizar":t.inside?"Guardar":"")+"\n            ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,"755b9fe1",null);e.default=component.exports},544:function(t,e,n){"use strict";var o=n(2),c=(n(28),n(507),n(492)),r=n(37),l=n(511),d=n(221),f=n(519),h=n(0),v=n(12),m=n(13);e.a=Object(m.a)(r.a,l.a,d.a,f.a).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},openOnFocus:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String},data:function(){return{calculatedMinWidth:0,closeDependents:!1}},computed:{calculatedLeft:function(){var t=this.dimensions,e=t.activator,content=t.content,n=!(this.bottom||this.left||this.top||this.right),o=!1!==this.attach?e.offsetLeft:e.left,c=0;return this.top||this.bottom||n?c=o+e.width/2-content.width/2:(this.left||this.right)&&(c=o+(this.right?e.width:-content.width)+(this.right?10:-10)),this.nudgeLeft&&(c-=parseInt(this.nudgeLeft)),this.nudgeRight&&(c+=parseInt(this.nudgeRight)),"".concat(this.calcXOverflow(c,this.dimensions.content.width),"px")},calculatedTop:function(){var t=this.dimensions,e=t.activator,content=t.content,n=!1!==this.attach?e.offsetTop:e.top,o=0;return this.top||this.bottom?o=n+(this.bottom?e.height:-content.height)+(this.bottom?10:-10):(this.left||this.right)&&(o=n+e.height/2-content.height/2),this.nudgeTop&&(o-=parseInt(this.nudgeTop)),this.nudgeBottom&&(o+=parseInt(this.nudgeBottom)),!1===this.attach&&(o+=this.pageYOffset),"".concat(this.calcYOverflow(o),"px")},classes:function(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition:function(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY:function(){return this.top||this.bottom},offsetX:function(){return this.left||this.right},styles:function(){return{left:this.calculatedLeft,maxWidth:Object(h.g)(this.maxWidth),minWidth:Object(h.g)(this.minWidth),top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount:function(){var t=this;this.$nextTick((function(){t.value&&t.callActivate()}))},mounted:function(){"v-slot"===Object(h.p)(this,"activator",!0)&&Object(v.b)("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate:function(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate:function(){this.runDelay("close")},genActivatorListeners:function(){var t=this,e=c.a.options.methods.genActivatorListeners.call(this);return this.openOnFocus&&(e.focus=function(e){t.getActivator(e),t.runDelay("open")},e.blur=function(e){t.getActivator(e),t.runDelay("close")}),e.keydown=function(e){e.keyCode===h.s.esc&&(t.getActivator(e),t.runDelay("close"))},e},genActivatorAttributes:function(){return{"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genTransition:function(){var content=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[content]):content},genContent:function(){return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:Object(o.a)(Object(o.a)(Object(o.a)({},this.contentClass,!0),"menuable__content__active",this.isActive),"v-tooltip__content--fixed",this.activatorFixed),style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render:function(t){var e=this;return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent((function(){return[e.genTransition()]})),this.genActivator()])}})},554:function(t,e,n){"use strict";n.r(e);var o=n(238),c=n(517),r=n(490),l=n(569),d=n(520),f=n(541),h=n(213),v=n(486),m=n(533),x=n(544),_=n(30),y=(n(119),n(29),n(178),n(75),n(5),n(534)),C=n(513),k=n(514),F={components:{crearFactura:y.default,CrearCotizacion:C.default,CrearFacturaRecurrente:k.default},data:function(){return{pageTitle:"Facturas",options:["Facturas","Facturas Recurrentes","Cotización"],selectedOption:"Facturas",items:[],headers:[],buttonText:"Nueva Factura",idBorrar:null,dialogCreateVentas:!1,dialogCreateCotizacion:!1,dialogUpdateVentas:!1,dialogUpdateCotizacion:!1,dialogCreateFacturaRecurrente:!1,dialogUpdateFacturaRecurrente:!1,dialogBorrar:!1,ventaActualizar:{},cotizacionActualizar:{},facturaActualizar:{},clientes:{}}},mounted:function(){this.navigateTo(),this.getData(),this.getClientes()},methods:{navigateTo:function(){var option=this.selectedOption;"Facturas"===option?(this.headers=[{text:"Cliente",value:"cliente"},{text:"Nota Id",value:"nonota"},{text:"Telefono",value:"telefono"},{text:"Observaciones",value:"notas"},{text:"Acciones",value:"acciones"}],this.buttonText="Nueva Factura",this.pageTitle="Facturas",this.getData()):"Cotización"===option?(this.headers=[{text:"Número de nota",value:"numeronota"},{text:"Cliente",value:"cliente"},{text:"Creación",value:"creacion"},{text:"Vencimiento",value:"vencimiento"},{text:"Estado",value:"estado"},{text:"Total",value:"total"},{text:"Acciones",value:"acciones"}],this.buttonText="Nueva Cotización",this.pageTitle="Cotización",this.getData()):"Facturas Recurrentes"===option&&(this.headers=[{text:"Cliente",value:"cliente"},{text:"Nota Id",value:"numeracion"},{text:"Telefono",value:"telefono"},{text:"Observaciones",value:"observaciones"},{text:"Acciones",value:"acciones"}],this.buttonText="Nueva Factura",this.pageTitle="Facturas Recurrentes",this.getData())},getApiEndpoint:function(){return"Facturas"===this.selectedOption?"/ventas":"Cotización"===this.selectedOption?"/cotizaciones":"Facturas Recurrentes"===this.selectedOption?"/facturas":"/ventas"},getClientes:function(){var t=this;return Object(_.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/clientes");case 3:(n=e.sent)&&n.data&&n.data.success&&(t.clientes=n.data.clientes.reduce((function(map,t){return map[t.id]=t.nombre,map}),{})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error al cargar clientes:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},verificarEstadoFacturas:function(){var t=this;return Object(_.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Date,t.items=t.items.map((function(t){var e=new Date(t.vencimiento);return t.estado=e>=n?"Activa":"No Activa",t}));case 2:case"end":return e.stop()}}),e)})))()},getData:function(){var t=this;return Object(_.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getApiEndpoint(),e.prev=1,e.next=4,t.$axios.get(n);case 4:if(!((o=e.sent)&&o.data&&o.data.success)){e.next=11;break}return"Facturas"===t.selectedOption?t.items=o.data.ventas||[]:"Cotización"===t.selectedOption?t.items=o.data.cotizaciones||[]:"Facturas Recurrentes"===t.selectedOption&&(t.items=o.data.facturas||[]),e.next=9,t.verificarEstadoFacturas();case 9:e.next=12;break;case 11:t.items=[];case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.error("Error al obtener datos desde ".concat(n,":"),e.t0),t.items=[];case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))()},borralo:function(){var t=this;return Object(_.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getApiEndpoint(),e.prev=1,e.next=4,t.$axios.delete("".concat(n,"/delete/").concat(t.idBorrar));case 4:if(!((o=e.sent)&&o.data&&o.data.success)){e.next=8;break}return e.next=8,t.getData();case 8:t.dialogBorrar=!1,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error("Error al borrar:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))()},crear:function(){this.dialogCreateVentas=!1,this.dialogCreateCotizacion=!1,this.dialogCreateFacturaRecurrente=!1,"Facturas"===this.selectedOption?this.dialogCreateVentas=!0:"Cotización"===this.selectedOption?this.dialogCreateCotizacion=!0:"Facturas Recurrentes"===this.selectedOption&&(this.dialogCreateFacturaRecurrente=!0)},update:function(t){this.dialogUpdateVentas=!1,this.dialogUpdateCotizacion=!1;var option=this.selectedOption;"Facturas"===option?this.updateVenta(t):"Cotización"===option?this.updateCotizacion(t):"Facturas Recurrentes"===option&&this.updateFactura(t)},ventasGuardado:function(){this.getData(),this.dialogCreateVentas=!1,this.dialogUpdateVentas=!1},updateVenta:function(t){t?(this.ventaActualizar=t,this.numeroNota=t.numero_nota,this.contactoSeleccionado=t.contacto,this.telefono=t.telefono,this.tipoPago=t.tipopago,this.terminoFecha=t.fechatermino,this.fechaVencimiento=t.fechavencimiento,this.filas=t.items||[],this.terminos=t.terminos,this.notas=t.notas,this.textoResolucion=t.resolucion,this.dialogUpdateVentas=!0):console.error("No se proporcionaron datos válidos para la factura")},deleteVenta:function(t){this.idBorrar=t,this.dialogBorrar=!0},cotizacionGuardada:function(){this.getData(),this.dialogCreateCotizacion=!1,this.dialogUpdateCotizacion=!1},updateCotizacion:function(t){t?(this.cotizacionActualizar=t,this.contactoSeleccionado=t.contacto||"",this.telefono=t.telefono||"",this.numeroNota=t.numero_nota||"",this.fecha=t.fecha||"",this.fechaVencimiento=t.fecha_vencimiento||"",this.filas=t.items||[],this.notas=t.notas||"",this.dialogUpdateCotizacion=!0):console.error("No se proporcionaron datos válidos para la cotización")},deleteCotizacion:function(t){this.idBorrar=t,this.dialogBorrar=!0},facturaGuardado:function(){this.getData(),this.dialogCreateFacturaRecurrente=!1,this.dialogUpdateFacturaRecurrente=!1},updateFactura:function(t){t?(this.facturaActualizar=t,this.numeracionSeleccionada=t.numeracion,this.contactoSeleccionado=t.contacto,this.telefono=t.telefono,this.fechaInicio=t.fechainicio,this.ultimaFecha=t.ultimafecha,this.terminoFecha=t.terminofecha,this.fechaExpiracion=t.fechaexpiracion,this.frecuenciaSeleccionada=t.frecuencia,this.listaPrecioSeleccionada=t.listaPrecio,this.notas=t.notas,this.observaciones=t.observaciones,this.filas=t.items||[],this.dialogUpdateFacturaRecurrente=!0):console.error("No se proporcionaron datos válidos para la factura recurrente")},deleteFactura:function(t){this.idBorrar=t,this.dialogBorrar=!0},actualizarTelefono:function(){var t=this,e=this.contactos.find((function(e){return e.id===t.contactoSeleccionado}));e&&(this.telefono=e.telefono)},getInventarios:function(){var t=this;return Object(_.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/inventarios");case 3:(n=e.sent)&&n.data&&n.data.success?t.inventarios=n.data.inventarios||[]:t.inventarios=[],e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error al obtener inventarios:",e.t0),t.inventarios=[];case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()}}},w=n(67),component=Object(w.a)(F,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"right-panel",staticStyle:{display:"flex","flex-direction":"column",padding:"20px","background-color":"#f9f9f9","border-radius":"8px",height:"100vh","box-sizing":"border-box"}},[e("div",{staticClass:"container",staticStyle:{height:"100%",overflow:"hidden"}},[e("h2",{staticStyle:{"font-size":"32px",color:"#1B262C",margin:"0","padding-bottom":"20px"}},[t._v("\n      "+t._s(t.pageTitle)+"\n    ")]),t._v(" "),e("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-bottom":"10px"}},[e(m.a,{staticStyle:{"flex-shrink":"0",width:"200px","background-color":"white","border-radius":"10px"},attrs:{items:t.options,"hide-details":"",outlined:"",dense:""},on:{change:t.navigateTo},model:{value:t.selectedOption,callback:function(e){t.selectedOption=e},expression:"selectedOption"}}),t._v(" "),e(o.a,{staticClass:"add-button",staticStyle:{"background-color":"#3282B8",color:"white","border-radius":"10px","margin-left":"10px"},attrs:{color:"#3282B8"},on:{click:t.crear}},[e(h.a,{attrs:{left:""}},[t._v("\n          mdi-account-plus\n        ")]),t._v(" "),e("span",{staticStyle:{"text-transform":"none"}},[t._v(t._s(t.buttonText))])],1)],1),t._v(" "),e("div",{staticStyle:{"background-color":"white","border-radius":"8px"}},[e("div",{staticStyle:{display:"flex","background-color":"#3282B8",color:"white",padding:"10px","border-radius":"15px",margin:"20px","box-shadow":"0 4px 6px rgba(0, 0, 0, 0.2)"}},t._l(t.headers,(function(header){return e("div",{key:header.text,staticStyle:{flex:"1","text-align":"center","font-weight":"bold"}},[t._v("\n          "+t._s(header.text)+"\n        ")])})),0),t._v(" "),t._l(t.items,(function(n){return e("div",{key:n.id,staticStyle:{"margin-bottom":"15px",padding:"10px","border-bottom":"1px solid #ddd",color:"black","border-radius":"15px","box-shadow":"0 4px 6px rgba(0, 0, 0, 0.2)"}},[e("div",{staticStyle:{display:"flex","text-align":"center"}},t._l(t.headers,(function(header){return e("div",{key:header.value,staticStyle:{flex:"1"}},["Acciones"===header.text?e("div",[e(x.a,{attrs:{bottom:"",color:"green"},scopedSlots:t._u([{key:"activator",fn:function(c){var r=c.on,l=c.attrs;return[e(o.a,t._g(t._b({attrs:{icon:"",color:"#EBD50F"},on:{click:function(e){return t.update(n)}}},"v-btn",l,!1),r),[e(h.a,[t._v("mdi-account-box-edit-outline")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v(" Actualiza: "+t._s(n.numeronota))])]),t._v(" "),e(x.a,{attrs:{bottom:"",color:"red"},scopedSlots:t._u([{key:"activator",fn:function(c){var r=c.on,l=c.attrs;return[e(o.a,t._g(t._b({attrs:{icon:"",color:"#FF7657"},on:{click:function(e){return t.deleteCotizacion(n.id)}}},"v-btn",l,!1),r),[e(h.a,[t._v("mdi-delete")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v(" Borra: "+t._s(n.numeronota))])])],1):e("div",[t._v("\n              "+t._s(n[header.value])+"\n            ")])])})),0)])}))],2)]),t._v(" "),e(d.a,{attrs:{width:"400",persistent:""},model:{value:t.dialogBorrar,callback:function(e){t.dialogBorrar=e},expression:"dialogBorrar"}},[e(c.a,{staticClass:"rounded-lg",attrs:{flat:"",elevation:"1",color:"#FFFFFF"}},[e(r.c,{staticStyle:{"background-color":"#BBE1FA","border-bottom":"1px solid #DADADA"}},[e("p",{staticClass:"title",staticStyle:{width:"100%",color:"#333333","justify-content":"left","font-size":"22px","font-weight":"bold"}},[t._v("\n          Borrar Venta\n        ")])]),t._v(" "),e(r.b,{staticStyle:{color:"#555555",display:"flex","flex-direction":"column","font-size":"18px",padding:"16px"}},[e(f.a,{staticClass:"my-2"}),t._v(" "),e(v.a,{staticClass:"pa-2",attrs:{align:"center",justify:"center"}},[t._v("\n          ¿Estás seguro? Vas a borrar la venta.\n        ")]),t._v(" "),e(f.a,{staticClass:"my-2"})],1),t._v(" "),e(r.a,{staticClass:"d-flex flex-column align-center",staticStyle:{padding:"16px"}},[e(v.a,{staticStyle:{width:"100%"},attrs:{justify:"space-between"}},[e(l.a,{attrs:{cols:"6"}},[e(o.a,{staticStyle:{"border-radius":"10px"},attrs:{color:"#EBD50F",block:""},on:{click:function(e){t.dialogBorrar=!1}}},[t._v("\n              Cancelar\n            ")])],1),t._v(" "),e(l.a,{attrs:{cols:"6"}},[e(o.a,{staticStyle:{"border-radius":"10px"},attrs:{color:"#FF7657",block:""},on:{click:t.borralo}},[t._v("\n              Borrar\n            ")])],1)],1)],1)],1)],1),t._v(" "),e(d.a,{attrs:{width:"1000",persistent:""},model:{value:t.dialogCreateVentas,callback:function(e){t.dialogCreateVentas=e},expression:"dialogCreateVentas"}},[e("crearVenta",{attrs:{inside:!0},on:{"click-cancel":function(e){t.dialogCreateVentas=!1},guardado:t.ventasGuardado}})],1),t._v(" "),e(d.a,{attrs:{width:"1000",persistent:""},model:{value:t.dialogUpdateVentas,callback:function(e){t.dialogUpdateVentas=e},expression:"dialogUpdateVentas"}},[e("crearVenta",{attrs:{inside:!0,update:!0,"venta-editada":t.ventaActualizar},on:{"click-cancel":function(e){t.dialogUpdateVentas=!1},guardado:t.ventasGuardado}})],1),t._v(" "),e(d.a,{attrs:{width:"1000",persistent:""},model:{value:t.dialogCreateCotizacion,callback:function(e){t.dialogCreateCotizacion=e},expression:"dialogCreateCotizacion"}},[e("crear-cotizacion",{attrs:{inside:!0},on:{"click-cancel":function(e){t.dialogCreateCotizacion=!1},guardado:t.cotizacionGuardada}})],1),t._v(" "),e(d.a,{attrs:{width:"1000",persistent:""},model:{value:t.dialogUpdateCotizacion,callback:function(e){t.dialogUpdateCotizacion=e},expression:"dialogUpdateCotizacion"}},[e("crear-cotizacion",{attrs:{inside:!0,update:!0,"cotizacion-editada":t.cotizacionActualizar},on:{"click-cancel":function(e){t.dialogUpdateCotizacion=!1},guardado:t.cotizacionGuardada}})],1),t._v(" "),e(d.a,{attrs:{width:"1200",persistent:""},model:{value:t.dialogCreateFacturaRecurrente,callback:function(e){t.dialogCreateFacturaRecurrente=e},expression:"dialogCreateFacturaRecurrente"}},[e("crear-factura-recurrente",{attrs:{inside:!0},on:{"click-cancel":function(e){t.dialogCreateFacturaRecurrente=!1},guardado:t.facturaGuardado}})],1),t._v(" "),e(d.a,{attrs:{width:"1000",persistent:""},model:{value:t.dialogUpdateFacturaRecurrente,callback:function(e){t.dialogUpdateFacturaRecurrente=e},expression:"dialogUpdateFacturaRecurrente"}},[e("crear-factura-recurrente",{attrs:{inside:!0,update:!0,"factura-editada":t.facturaActualizar},on:{"click-cancel":function(e){t.dialogUpdateFacturaRecurrente=!1},guardado:t.facturaGuardado}})],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{CrearCotizacion:n(513).default,CrearFacturaRecurrente:n(514).default})},639:function(t,e,n){"use strict";n.r(e);var o={components:{ventasCrud:n(554).default},layout:"dashboard",middleware:"auth"},c=n(67),component=Object(c.a)(o,(function(){return(0,this._self._c)("ventas-crud")}),[],!1,null,"51dc45c5",null);e.default=component.exports;installComponents(component,{VentasCrud:n(554).default})}}]);